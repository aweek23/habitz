/* =========================================================
   Thème global
   ========================================================= */
:root{
  --nav-bg:#0c1016;
  --page-bg:#0b0f13;
  --item-hov:#131923;
  --item-act:#1a2230;
  --text-hi:#e5e7eb;
  --text-lo:#a5b4c3;
  --border:rgba(255,255,255,.06);
  --ring:rgba(59,130,246,.45);
  --accent:#4b7cff;
  --ok:#34d399;
  --warn:#ff8a8a;
}

*,*::before,*::after{ box-sizing:border-box; }
html,body{ height:100%; }
:root{ color-scheme: dark; }

body{
  margin:0; background:var(--page-bg); color:var(--text-hi);
  font:15px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

/* Utilitaires */
.hidden{ display:none !important; }
.trim-ellipsis{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* =========================================================
   Boutons icônes génériques
   ========================================================= */
.icon-mini{
  width:34px; height:34px; border-radius:8px; border:1px solid var(--border);
  background:transparent; color:var(--text-lo); display:grid; place-items:center; cursor:pointer;
}
.icon-mini:hover{ background:var(--item-hov); color:var(--text-hi); }
.icon-mini svg{ width:18px; height:18px; }

/* =========================================================
   AUTH (auth.php)
   ========================================================= */
.auth-screen{ display:grid; place-items:center; min-height:100dvh; }
.auth-card{
  width:min(520px,92vw);
  background:var(--nav-bg);
  border:1px solid var(--border);
  border-radius:14px;
  padding:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
}

.auth-tabs{ display:flex; gap:8px; margin-bottom:10px; }
.auth-tab{
  flex:1; padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:transparent; color:var(--text-lo); cursor:pointer;
}
.auth-tab.active{ background:var(--item-act); color:var(--text-hi); }

.auth-form{ display:grid; gap:10px; }
.auth-form.hidden{ display:none; }
.auth-form label{ display:grid; gap:6px; font-size:14px; color:var(--text-lo); }

.label-row{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.field-actions{ display:flex; align-items:center; gap:6px; }

/* Inputs */
.auth-form input{
  padding:12px; border-radius:10px; border:1px solid var(--border);
  background:#0b0f13; color:var(--text-hi); outline:none;
}
.auth-form input:focus{ box-shadow:0 0 0 3px var(--ring); }

/* Selects (Genre, indicatifs, etc.) */
.auth-form select{
  appearance:none; padding:12px; border-radius:10px; border:1px solid var(--border);
  background:#0b0f13; color:var(--text-hi); outline:none;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6 9l6 6 6-6' stroke='%23a5b4c3' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'/></svg>");
  background-repeat:no-repeat; background-position:right 10px center; background-size:10px 10px;
}
.auth-form select:focus{ box-shadow:0 0 0 3px var(--ring); }
.auth-form select option,
.auth-form select optgroup{ background:#0b0f13; color:var(--text-hi); }

/* Petits textes */
.auth-error{ color:var(--warn); font-size:13px; margin:4px 2px 0; }
.auth-success{ color:var(--ok); font-size:13px; margin:4px 2px 0; }
.auth-error:empty,.auth-success:empty{ display:none; margin:0; }

.soft-note{ color:var(--text-lo); font-size:13px; margin:4px 2px 0; }
.legal-note{ color:var(--text-lo); font-size:12.5px; line-height:1.45; }
.legal-note a{ color:var(--text-hi); text-decoration:underline; }

/* Boutons */
.btn-primary{
  margin-top:6px; padding:12px 14px; border:0; border-radius:10px; cursor:pointer;
  background:linear-gradient(180deg,#5a86ff,#7aa2ff 70%,#a0baff); color:#081019; font-weight:600;
}
.btn-ghost{
  padding:8px 10px; border-radius:8px; border:1px solid var(--border);
  background:transparent; color:var(--text-hi); cursor:pointer; white-space:nowrap;
}

/* Ligne erreur + lien "oubli" (connexion) */
.auth-inline-row{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
}
.auth-inline-row .auth-error{ margin:0; }

/* Champ téléphone (indicatif intégré) */
.phone-field{
  position: relative; display:flex; align-items:center; overflow:hidden;
  background:#0b0f13; border:1px solid var(--border); border-radius:10px;
}
.phone-field:focus-within{ box-shadow:0 0 0 3px var(--ring); }
.phone-field .phone-code{
  appearance:none; width:118px; min-width:108px; padding:12px 22px 12px 8px; height:44px;
  background:transparent; color:var(--text-hi); border:0; border-right:1px solid var(--border);
  border-top-left-radius:10px; border-bottom-left-radius:10px; outline:none; cursor:pointer;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6 9l6 6 6-6' stroke='%23a5b4c3' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'/></svg>");
  background-repeat:no-repeat; background-position:right 8px center; background-size:10px 10px;
}
.phone-field .phone-code,
.phone-field .phone-code option,
.phone-field .phone-code optgroup{ background-color:#0b0f13; color:var(--text-hi); }
.phone-field input[type="tel"]{
  flex:1; height:44px; padding:12px; background:transparent; color:var(--text-hi);
  border:0; outline:none; border-top-right-radius:10px; border-bottom-right-radius:10px;
}

/* Champ date + datepicker custom sombre */
.date-field{ position: relative; }
.date-field .date-input{
  width:100%; padding:12px 40px 12px 12px; border-radius:10px; border:1px solid var(--border);
  background:#0b0f13; color:var(--text-hi); outline:none;
}
.date-field .date-input:focus{ box-shadow:0 0 0 3px var(--ring); }
.date-field .calendar-ico{
  position:absolute; right:10px; top:50%; transform:translateY(-50%); width:18px; height:18px;
  pointer-events:none; color:var(--text-lo);
}
.datepicker{
  position:absolute; z-index:1000; top:calc(100% + 6px); left:0; width:320px;
  background:var(--nav-bg); border:1px solid var(--border); border-radius:12px; padding:10px;
  box-shadow:0 12px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.03);
  display:none;
}
.datepicker.open{ display:block; }
.dp-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding-bottom:8px; border-bottom:1px solid var(--border); }
.dp-title{ font-weight:600; color:var(--text-hi); }
.dp-nav{ display:flex; gap:6px; }
.dp-btn{
  width:30px; height:30px; border-radius:8px; border:1px solid var(--border);
  background:transparent; color:var(--text-hi); cursor:pointer;
}
.dp-btn:hover{ background:var(--item-hov); }
.dp-grid{ display:grid; grid-template-columns: repeat(7,1fr); gap:6px; padding-top:10px; }
.dp-cell{ text-align:center; padding:8px 0; border-radius:8px; cursor:pointer; color:var(--text-hi); background:transparent; border:0; }
.dp-cell:hover{ background:var(--item-hov); }
.dp-cell.muted{ color:var(--text-lo); }
.dp-cell.disabled{ color:#556073; cursor:not-allowed; }
.dp-cell.selected{ background:var(--item-act); }

/* Générateur de mot de passe (popover) */
.password-label{ position:relative; }
.popover{
  position:absolute; top:calc(100% + 6px); right:0;
  /* ⬇️ largeur auto (plus d’espace mort à droite) */
  width:max-content; max-width:min(520px,92vw);
  background:var(--nav-bg); border:1px solid var(--border); border-radius:12px; padding:12px;
  box-shadow:0 12px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.03);
  display:none; z-index:1000;
}
.popover.open{ display:block; }
.options-row{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; width:100%; }
.options-row label{ color:var(--text-lo); font-size:13px; display:flex; align-items:center; gap:6px; }
#genLength{ width:86px; }

/* ⬇️ inline-grid largeur auto (positions conservées) */
.gen-bar{
  display:inline-grid;
  grid-template-columns:auto minmax(160px,240px) auto auto;
  align-items:center;
  gap:8px;
  margin-top:10px;
  width:auto;
}
.gen-bar > *{ min-width:0; }
.gen-bar .btn-primary{ padding:8px 12px; border-radius:8px; border:0; background:linear-gradient(180deg,#5a86ff,#7aa2ff 70%,#a0baff); color:#081019; font-weight:600; cursor:pointer; white-space:nowrap; }
.gen-bar .btn-ghost{ padding:8px 10px; border-radius:8px; border:1px solid var(--border); background:transparent; color:var(--text-hi); cursor:pointer; white-space:nowrap; }
.gen-bar input{ width:100%; padding:10px; border-radius:8px; border:1px solid var(--border); background:#0b0f13; color:var(--text-hi); }

/* =========================================================
   APP / NAVBAR (index.html)
   ========================================================= */
.app{ display:flex; min-height:100vh; }

.sidebar{
  width:260px; background:var(--nav-bg); border-right:1px solid var(--border);
  padding:10px; display:flex; flex-direction:column; gap:8px;
  transition:transform .25s ease;
}
.side-top{ display:flex; align-items:center; justify-content:space-between; padding:4px 4px 8px; }
.brand{ font-weight:700; color:var(--text-hi); }
.nav{ display:flex; flex-direction:column; gap:8px; }

.menu{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:6px; }
.menu-item{ user-select:none; position:relative; }
.item{
  width:100%; text-align:left; padding:10px 12px;
  border-radius:10px; border:1px solid transparent;
  color:var(--text-hi); background:transparent; cursor:pointer;
}
.item:hover{ background:var(--item-hov); }
.item .ico{ width:16px; height:16px; margin-right:8px; }

.has-sub .has-sub-btn{ display:flex; align-items:center; justify-content:space-between; width:100%; }
.has-sub .chev{ width:16px; height:16px; transition:transform .18s ease; }
.has-sub.open .chev{ transform:rotate(180deg); }

/* Sous-menus: pas de puces */
.submenu{ list-style:none; margin:4px 0 0 0; padding-left:8px; display:none; }
.has-sub.open > .submenu{ display:block; }
.submenu li{ list-style:none; }
.subitem{
  width:100%; text-align:left; padding:8px 12px 8px 14px; border-radius:8px; border:1px solid transparent;
  color:var(--text-hi); background:transparent; cursor:pointer;
}
.subitem:hover{ background:var(--item-hov); }

.divider{ height:1px; background:var(--border); margin:8px 4px 4px; }
.item-settings{ margin-top:2px; }

/* Mode réorganisation */
.sidebar.reorder .menu-item{ border:1px dashed var(--border); border-radius:10px; padding:2px; }
.sidebar.reorder .item{ cursor:grab; }
.menu-item.dragging{ opacity:.6; }

/* Masquage modules + boutons "œil" */
.menu-item.disabled .item{ opacity:.45; }
.sidebar:not(.reorder) .menu-item.disabled{ display:none; }
.vis-toggle{
  display:none; position:absolute; right:6px; top:6px; width:28px; height:28px;
  border-radius:8px; border:1px solid var(--border); background:transparent; color:var(--text-lo);
  place-items:center; cursor:pointer;
}
.vis-toggle svg{ width:16px; height:16px; }
.sidebar.reorder .vis-toggle{ display:grid; }
.vis-toggle:hover{ background:var(--item-hov); color:var(--text-hi); }

/* Contenu principal */
.main{ flex:1; padding:24px; }

/* ======= Bouton hamburger + overlay pour tablettes ======= */
.tablet-toggle{
  position:fixed; left:12px; top:12px; z-index:1200; display:none;
  width:40px; height:40px; border-radius:10px; border:1px solid var(--border);
  background:var(--nav-bg); color:var(--text-hi); place-items:center; cursor:pointer;
  box-shadow:0 6px 16px rgba(0,0,0,.35);
}
.tablet-toggle:hover{ background:#101620; }

.nav-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; z-index:1005;
}

/* Mode tablette (class posée par JS) */
body.is-tablet .tablet-toggle{ display:grid; }
body.is-tablet .sidebar{
  position:fixed; left:0; top:0; bottom:0; z-index:1100; width:280px;
  transform:translateX(0);
}
body.is-tablet .sidebar.collapsed{ transform:translateX(-105%); }
body.is-tablet .nav-overlay.show{ display:block; }

/* =========================================================
   Mobile: marges haut/bas + aperçu plus court
   ========================================================= */
@media (max-width: 640px){
  .auth-screen{
    padding-top: calc(4vw + env(safe-area-inset-top, 0px));
    padding-bottom: calc(4vw + env(safe-area-inset-bottom, 0px));
  }
  .gen-bar{
    display:inline-grid;
    grid-template-columns:auto minmax(80px,23.5vw) auto auto;
    width:auto;
  }
  #genPreview{ font-size:14px; }
}
