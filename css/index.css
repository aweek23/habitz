:root{
  --card-bg:#0f141c;
  --card-border:rgba(255,255,255,.06);
  --muted:#8ca0b3;
}

.test-page .app{
  display:grid;
  grid-template-columns: var(--sidebar-width) 1fr 320px;
  gap:0;
  min-height:100vh;
  padding:12px;
  margin-left:0;
}
.test-page .app.compact-right{ grid-template-columns: var(--sidebar-width) 1fr 0; }
.test-page .app.sheet-overlay{ grid-template-columns: var(--sidebar-width) 1fr; }
.test-page.is-tablet .app{ grid-template-columns: 1fr; }
.test-page.is-tablet.nav-open .app{ grid-template-columns: var(--sidebar-width) 1fr; }
.test-page.is-tablet .sidebar{ grid-column:1; grid-row:1; }
.test-page.is-tablet .mid-column{ grid-column:1; grid-row:1; }
.test-page.is-tablet .right-column{ grid-column:1; grid-row:1; }
.test-page .sidebar{ position:sticky; top:12px; height: calc(100dvh - 24px); min-height: calc(100vh - 24px); }
.test-page .mid-column{ position:relative; min-height:calc(100dvh - 24px); display:flex; flex-direction:column; }
.test-page .right-column{ position:relative; min-height:calc(100dvh - 24px); }
.test-page .app.sheet-overlay .right-column{
  position:fixed;
  top:12px;
  right:12px;
  height:calc(100dvh - 24px);
  width:320px;
  max-width:calc(100vw - var(--sidebar-width) - 36px);
  pointer-events:none;
  z-index:650;
}
.test-page .app.sheet-overlay .right-column.sheet-open{ pointer-events:auto; }
.test-page .app.sheet-overlay .right-column .top-stack{ height:100%; }
.test-page.is-tablet .right-column{ position:fixed; top:12px; right:12px; width:320px; max-width:calc(100vw - 48px); height:calc(100dvh - 24px); pointer-events:none; z-index:650; }
.test-page.is-tablet .right-column.sheet-open{ pointer-events:auto; }

.test-page .main.dashboard{ flex:1; padding:0 12px 16px; margin-top:calc(40px + 10px); }
.test-page.is-tablet .main.dashboard{ padding:0 0 16px; }
.test-page .page-head{ display:flex; justify-content:space-between; align-items:flex-start; }
.test-page .title-stack h1{ margin:0 0 4px; }
.test-page .title-stack .muted{ margin:0; color:var(--muted); }

.test-page .top-stack{ position:sticky; top:0; right:auto; bottom:auto; width:100%; height:calc(100dvh - 24px); min-height:calc(100vh - 24px); }
.test-page.is-tablet .top-stack{
  position:fixed;
  top:12px;
  right:16px;
  bottom:12px;
  width:320px;
  height:calc(100dvh - 24px);
  min-height:calc(100vh - 24px);
}
.test-page .top-stack.sheet-mode{ transform:translateX(110%); opacity:0; pointer-events:none; }
.test-page .top-stack.sheet-mode.open{ transform:translateX(0); opacity:1; pointer-events:auto; }

.test-page .nav-overlay{ z-index:900; }
.test-page.is-tablet.nav-open .nav-overlay{
  left: calc(var(--sidebar-width) + 24px);
  right: 0;
}

.modules-reorder-active .sidebar,
.modules-reorder-active .right-column{
  filter:brightness(0.55);
}
.modules-reorder-active .right-column{ pointer-events:none; }

.test-page.is-tablet .mid-column,
.test-page.is-tablet .sidebar{
  background: var(--page-bg);
}

.alerts-fab { align-items: center; }
.edit-dashboard-btn{
  width:auto;
  min-width:140px;
  padding:0 14px;
  border:1px solid var(--border);
  border-radius:10px;
  background:rgba(12,16,22,0.82);
  color:var(--text-hi);
  font-size:13px;
  font-weight:600;
  letter-spacing:0.01em;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  transition:all .16s ease;
  box-shadow:0 10px 28px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.03);
}
.edit-dashboard-btn:hover{ border-color:rgba(255,255,255,.14); color:#fff; }
.edit-dashboard-btn:active{ transform:translateY(1px); }

.layout-switcher{ 
  display:none;
  align-items:center;
  gap:6px;
  margin-left:10px;
}
.layout-switcher.visible{ display:flex; }
.modules-reorder-active .layout-switcher{ display:flex; }
.layout-btn{
  border-color:var(--border);
  background:transparent;
  color:var(--text-lo);
  transition:all .16s ease;
}
.layout-btn svg rect,
.layout-btn svg circle{
  fill:none;
  stroke:currentColor;
  stroke-width:1.5;
  stroke-linejoin:round;
}
.layout-btn svg{ width:18px; height:18px; }
.layout-btn:hover{ background:var(--item-hov); color:var(--text-hi); }
.layout-btn.active{ border-color:#5ad1ff; color:#fff; box-shadow:0 6px 14px rgba(0,0,0,.24); }

.test-grid{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:16px; }
@media (min-width:1600px){ .test-grid{ grid-template-columns:repeat(4,minmax(0,1fr)); } }
@media (max-width:1200px){ .test-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
@media (max-width:640px){ .test-grid{ grid-template-columns:1fr; } }
.test-grid.layout-4{ grid-template-columns:repeat(4,minmax(0,1fr)); }
.test-grid.layout-3{ grid-template-columns:repeat(3,minmax(0,1fr)); }
.test-grid.layout-2{ grid-template-columns:repeat(2,minmax(0,1fr)); }
.test-grid.layout-1{ grid-template-columns:1fr; }

.test-module{
  position:relative;
  background:var(--card-bg);
  border:1px solid var(--card-border);
  border-radius:12px;
  min-height:140px;
  box-shadow:0 10px 28px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.03);
}
.test-grid.modules-reorder .test-module{ outline:1px dashed var(--border-strong); }
.test-grid.modules-reorder .test-module{ cursor:grab; }
.test-grid.modules-reorder .test-module:active{ cursor:grabbing; }
.test-grid.modules-reorder .test-module > *{ pointer-events:none; }
.test-grid.modules-reorder .module-toggle{ pointer-events:auto; }
.test-module.dragging{ opacity:0.5; }
.module-toggle{
  position:absolute;
  top:8px;
  right:8px;
  width:28px;
  height:28px;
  display:none;
  place-items:center;
  border:1px solid var(--card-border);
  border-radius:8px;
  background:rgba(255,255,255,.04);
  color:var(--muted);
  cursor:pointer;
  transition:all .16s ease;
  box-shadow:0 8px 20px rgba(0,0,0,.22);
}
.module-toggle svg{ width:16px; height:16px; }
.module-toggle:hover{ border-color:rgba(255,255,255,.14); color:#fff; background:rgba(255,255,255,.06); }
.test-grid.modules-reorder .module-toggle{ display:grid; }
.test-grid.modules-reorder .test-module.hidden-slot{ opacity:0.35; filter:saturate(0.4); }

.pedometer-card{ padding:16px 18px 14px; display:flex; flex-direction:column; gap:12px; height:100%; }
.pedometer-header{ display:flex; align-items:flex-start; justify-content:space-between; gap:12px; }
.pedometer-title{ margin:0; font-size:15px; letter-spacing:0.01em; }
.pedometer-stats{ display:flex; align-items:flex-end; gap:8px; }
.pedometer-stats .steps-current{ font-size:32px; font-weight:700; line-height:1; }
.pedometer-stats .steps-goal{ font-size:13px; color:var(--muted); margin-bottom:4px; }
.pedometer-progress{ width:100%; height:8px; border-radius:6px; background:rgba(255,255,255,.06); overflow:hidden; box-shadow:inset 0 1px 0 rgba(255,255,255,.05); }
.pedometer-progress-bar{ height:100%; background:linear-gradient(90deg, #5ad1ff, #7df1c4); border-radius:inherit; box-shadow:0 6px 16px rgba(90,209,255,.32); }
.pedometer-metrics{ display:flex; gap:16px; color:var(--muted); font-size:13px; }
.metric{ display:flex; flex-direction:column; gap:2px; }
.metric-value{ color:#fff; font-weight:600; font-size:14px; }
.metric-label{ letter-spacing:0.01em; }

.steps-evolution{ padding:16px 18px 18px; display:flex; flex-direction:column; gap:10px; height:100%; }
.steps-evolution-header{ display:flex; align-items:center; justify-content:space-between; }
.steps-evolution-title{ margin:0; font-size:15px; letter-spacing:0.01em; }
.steps-filters{ display:flex; gap:6px; }
.steps-filter-btn{
  background:transparent;
  color:var(--muted);
  border:1px solid var(--card-border);
  border-radius:8px;
  padding:5px 10px;
  font-size:12px;
  letter-spacing:0.01em;
  cursor:pointer;
  transition:all .16s ease;
}
.steps-filter-btn:hover{ border-color:rgba(255,255,255,.14); color:#fff; box-shadow:0 6px 14px rgba(0,0,0,.24); }
.steps-filter-btn:active{ transform:translateY(1px); }
.steps-chart{ background:transparent; border:none; border-radius:0; padding:0; }
.steps-chart-img{
  width:100%;
  max-width:100%;
  height:auto;
  object-fit:contain;
  display:block;
  border-radius:0;
}