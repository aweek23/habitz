:root{
  --nav-bg:#0c1016;
  --page-bg:#0b0f13;
  --item-hov:#131923;
  --item-act:#1a2230;
  --text-hi:#e5e7eb;
  --text-lo:#a5b4c3;
  --border:rgba(255,255,255,.06);
  --ring:rgba(59,130,246,.45);
  --accent:#4b7cff;
  --ok:#34d399;
  --warn:#ff8a8a;
}
*,*::before,*::after{ box-sizing:border-box; }
html,body{ height:100%; }
:root{ color-scheme: dark; }
body{
  margin:0; background:var(--page-bg); color:var(--text-hi);
  font:15px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}
.hidden{ display:none !important; }
.trim-ellipsis{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.icon-mini{
  width:34px; height:34px; border-radius:8px; border:1px solid var(--border);
  background:transparent; color:var(--text-lo); display:grid; place-items:center; cursor:pointer;
}
.icon-mini:hover{ background:var(--item-hov); color:var(--text-hi); }
.icon-mini svg{ width:18px; height:18px; }

/* --- APP/NAV --- */
.app{ display:flex; min-height:100vh; }

/* Sidebar */
.sidebar{
  width:auto;
  background:var(--nav-bg);
  border-right:1px solid var(--border);
  padding:10px;
  display:flex; flex-direction:column; gap:8px;
  transition:transform .25s ease;
}

.side-top{ display:flex; align-items:center; justify-content:space-between; padding:4px 4px 8px; }
.brand{ font-weight:700; color:var(--text-hi); }
.nav{ display:flex; flex-direction:column; gap:8px; }

/* Liste = largeur du plus long bouton */
.menu{
  list-style:none; margin:0; padding:0;
  display:flex; flex-direction:column; gap:6px; align-items:stretch;
  width:max-content; inline-size:max-content;
}
body.is-tablet .menu{ padding:0; width:100%; inline-size:auto; }

.menu-item{ user-select:none; position:relative; }

/* Boutons NAV (réserve droite pour l'œil en mode édition) */
.item{
  display:block; width:100%;
  text-align:left; padding:10px 44px 10px 12px;
  border-radius:10px; border:1px solid transparent;
  color:var(--text-hi); background:transparent; cursor:pointer;
}
.item:hover{ background:var(--item-hov); }
.item .ico{ width:16px; height:16px; margin-right:8px; }

/* Sous-menus */
.has-sub .has-sub-btn{ display:flex; align-items:center; justify-content:space-between; width:100%; }
.has-sub .chev{ width:16px; height:16px; transition:transform .18s ease; }
.has-sub.open .chev{ transform:rotate(180deg); }

.submenu{
  list-style:none; margin:4px 0 0 0; padding-left:8px; display:none; align-items:stretch;
}
.has-sub.open > .submenu{ display:block; }
.submenu li{ list-style:none; }
.subitem{
  display:block; width:100%;
  text-align:left; padding:8px 12px 8px 14px;
  border-radius:8px; border:1px solid transparent;
  color:var(--text-hi); background:transparent; cursor:pointer;
}
.subitem:hover{ background:var(--item-hov); }

.divider{ height:1px; background:var(--border); margin:8px 4px 4px; }
.item-settings{ margin-top:2px; }

/* ===== Mode réorganisation ===== */
.sidebar.reorder .menu-item{ border:1px dashed var(--border); border-radius:10px; padding:2px; }
.sidebar.reorder .item{ cursor:grab; }
.menu-item.dragging{ opacity:.6; }

/* Masquage + œil */
.menu-item.disabled .item{ opacity:.45; }
.sidebar:not(.reorder) .menu-item.disabled{ display:none; }
.vis-toggle{
  display:none; position:absolute; right:6px; top:6px; width:28px; height:28px;
  border-radius:8px; border:1px solid var(--border); background:transparent; color:var(--text-lo);
  place-items:center; cursor:pointer;
}
.vis-toggle svg{ width:16px; height:16px; }
.sidebar.reorder .vis-toggle{ display:grid; }
.vis-toggle:hover{ background:var(--item-hov); color:var(--text-hi); }

/* Contenu principal */
.main{ flex:1; padding:24px; }

/* --- Tablet / overlay --- */
.tablet-toggle{
  position:fixed; left:12px; top:12px; z-index:1200; display:none;
  width:40px; height:40px; border-radius:10px; border:1px solid var(--border);
  background:var(--nav-bg); color:var(--text-hi); place-items:center; cursor:pointer;
  box-shadow:0 6px 16px rgba(0,0,0,.35);
}
.tablet-toggle:hover{ background:#101620; }
.nav-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; z-index:1005; }
body.is-tablet .tablet-toggle{ display:grid; }
body.is-tablet .sidebar{ position:fixed; left:0; top:0; bottom:0; z-index:1100; width:280px; transform:translateX(0); }
body.is-tablet .sidebar.collapsed{ transform:translateX(-105%); }
body.is-tablet .nav-overlay.show{ display:block; }

/* --- Barre & panneau top droite (desktop plein écran) --- */
.top-stack{
  position:fixed; top:12px; right:16px; z-index:900;
  width:320px; display:flex; flex-direction:column; gap:10px;
}
.top-search{
  display:flex; align-items:center; gap:8px;
  width:100%; padding:8px 10px;
  background:var(--page-bg);
  border:1px solid var(--border); border-radius:10px;
  box-shadow:0 6px 16px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.03);
}
.top-search .search-ico{ width:18px; height:18px; color:var(--text-lo); }
.top-search input[type="search"]{
  flex:1; background:transparent; border:0; outline:none; color:var(--text-hi); font-size:14px;
}
.top-panel{
  width:100%;
  background:var(--page-bg);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:0 10px 24px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.03);
  padding:12px; min-height:120px;
}
.top-panel h2{
  margin:0 0 6px;
  font-size:15px;
  font-weight:600;
}
.top-panel p{
  margin:0;
  color:var(--text-lo);
  font-size:14px;
}
body.is-tablet .top-stack{ display:none; }
